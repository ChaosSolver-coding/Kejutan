<!DOCTYPE html>
<html lang="id">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>Roda Keberuntunganmu</title>
  <link href="https://fonts.googleapis.com/css2?family=Fredoka:wght@600&display=swap" rel="stylesheet">
  <style>
    body {
      background: #ffeede;
      font-family: 'Fredoka', sans-serif;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: flex-start;
      padding: 20px;
    }
    h1 {
      color: #d35400;
    }

    .wheel-container {
      position: relative;
      width: 300px;
      height: 300px;
    }

    canvas {
      width: 100%;
      height: 100%;
      z-index: 1;
    }

    .logo-center {
      position: absolute;
      top: 50%;
      left: 50%;
      width: 60px;
      height: 60px;
      transform: translate(-50%, -50%);
      z-index: 2;
      border-radius: 50%;
    }

    .form {
      display: flex;
      flex-direction: column;
      gap: 10px;
      width: 90%;
      max-width: 400px;
      margin-top: 20px;
    }

    .form input {
      padding: 10px;
      font-size: 16px;
      border-radius: 5px;
      border: 1px solid #ccc;
    }

    .form button {
      padding: 10px;
      font-size: 16px;
      background-color: orange;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }

    #winners {
      margin-top: 20px;
      background: white;
      border-radius: 10px;
      padding: 10px;
      width: 90%;
      max-width: 400px;
      text-align: left;
    }

    #winners h2 {
      margin-top: 0;
    }

  </style>
</head>
  <!-- Popup Custom -->
<div id="popupAlert" class="popup-alert hidden">
  <div class="popup-content">
    <p>üéÅ Segera screenshot hasil spin kamu!<br>Karena ini hanya berlaku <strong>1x</strong>.</p>
    <button id="closePopup">OK</button>
  </div>
</div>
  </div>
</div>
<body>
  <h1>RODA KEBERUNTUNGANMU</h1>

  <div class="wheel-container">
    <canvas id="wheel" width="300" height="300"></canvas>
    <img src="Logo2.png" alt="logo dimsum" class="logo-center" />
  </div>

  <div class="form">
    <input type="text" id="name" placeholder="Nama Kamu">
    <input type="tel" id="phone" placeholder="Nomor HP">
    <button id="spinBtn">SPIN!</button>
  </div>

  <div id="winners">
    <h2>Daftar Pemenang:</h2>
    <ul id="winnerList"></ul>
  </div>

  <!-- Suara putaran dan musik latar -->
  <audio id="spinSound" src="comedy2.mp3" preload="auto"></audio>
  <audio id="bgMusic" src="comedy.mp3" loop autoplay></audio>
  <button id="btn">Play!</button>
  <script>
    const wheel = document.getElementById("wheel");
    const ctx = wheel.getContext("2d");
    const spinBtn = document.getElementById("spinBtn");
    const winnerList = document.getElementById("winnerList");
    const spinSound = document.getElementById("spinSound");
    const bgMusic = document.getElementById("bgMusic");

    const segments = ["1 Pcs Dimsum", "Es Teh Gratis", "Diskon 2 Ribu", "Komik Si Lapar", "Hadiah Misteri", "Coba Lagi"];
    const colors = ["#fbd786", "#f7797d", "#f6f578", "#a1c4fd", "#c2b0f9", "#ffb3ba"];

    const segmentAngle = 2 * Math.PI / segments.length;

    let isSpinning = false;
    let hasSpun = false;
    let rotation = 0;

    function drawWheel() {
      for (let i = 0; i < segments.length; i++) {
        ctx.beginPath();
        ctx.moveTo(150, 150);
        ctx.arc(150, 150, 150, segmentAngle * i, segmentAngle * (i + 1));
        ctx.fillStyle = colors[i];
        ctx.fill();
        ctx.save();
        ctx.translate(150, 150);
        ctx.rotate(segmentAngle * (i + 0.5));
        ctx.fillStyle = "#000";
        ctx.font = "14px Fredoka";
        ctx.textAlign = "right";
        ctx.fillText(segments[i], 120, 5);
        ctx.restore();
      }
    }

    drawWheel();

    function spinWheel() {
      if (isSpinning || hasSpun) return;

      const name = document.getElementById("name").value.trim();
      const phone = document.getElementById("phone").value.trim();
      if (!name || !phone) {
        alert("Isi nama dan no HP kamu dulu!");
        return;
      }

      // Mainkan suara putaran
      spinSound.play();

      isSpinning = true;
      spinBtn.disabled = true;

      const extraRotation = 360 * 5;
      const randomRotation = Math.floor(Math.random() * 360);
      rotation = extraRotation + randomRotation;

      wheel.style.transition = "transform 4s ease-out";
      wheel.style.transform = `rotate(${rotation}deg)`;

      setTimeout(() => {
        const normalized = (360 - (rotation % 360)) % 360;
        const resultIndex = Math.floor(normalized / (360 / segments.length));
        const winner = segments[resultIndex];

        const li = document.createElement("li");
        li.textContent = `${name} (${phone}): ${winner}`;
        winnerList.appendChild(li);

        localStorage.setItem(phone, winner);

        hasSpun = true;
      }, 4000);
    }

    spinBtn.addEventListener("click", spinWheel);

    // Fungsi untuk pause musik latar
    function pauseMusic() {
      bgMusic.pause();
    }
  </script>
</body>
</html>
